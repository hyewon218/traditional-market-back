<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>회원 상세보기(관리자)</title>
    <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
    <script th:src="@{/js/admin/memberinfo.js}" defer="defer"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div th:replace="~{fragments/common/header :: headerFragment}"></div>
<div id="admin-body">
    <div class="admin-sidebar">
        <h3>관리자 메뉴</h3>
        <ul>
            <li><a th:href="@{/admin}">관리자 페이지 홈</a></li>
            <li><a th:href="@{/admin/markets}">시장 관리</a></li>
            <li><a th:href="@{/admin/shops}">상점 관리</a></li>
            <li><a th:href="@{/admin/items}">상품 관리</a></li>
            <li><a th:href="@{/admin/members}">회원 관리</a></li>
            <li><a th:href="@{/admin/inquiries}">문의사항 관리</a></li>
            <li><a th:href="@{/admin/notices}">공지사항 관리</a></li>
            <li><a th:href="@{/admin/visitor}">방문자 수</a></li>
        </ul>
    </div>
    <div class="adminMember-info">
        <h2 id="h2">회원 상세정보(관리자)</h2>
        <h2 id="myinfo">내 정보</h2>
        <div>
            <strong>회원 ID:</strong> <span id="memberId"></span>
        </div>
        <div>
            <strong>이메일:</strong> <span id="memberEmail"></span>
        </div>
        <div>
            <strong>닉네임:</strong> <span id="nicknameWithRandomTag"></span>
        </div>
        <div>
            <strong>권한:</strong>
            <form id="updateRoleForm" >
                <select id="role" name="role" required>
                    <option value="MEMBER">MEMBER</option>
                    <option value="SELLER">SELLER</option>
                    <option value="WARNINGMEMBER">WARNINGMEMBER</option>
                    <option value="MANAGER">MANAGER</option>
                </select>
                <button type="submit">권한 수정</button>
            </form>
        </div>
        <div>
            <strong>가입일:</strong> <span id="createTime"></span>
        </div>
        <th:block sec:authorize="hasAnyRole('ADMIN')">
            <button class="button-info" id="deleteButton">회원 삭제</button>
        </th:block>
    </div>
</div>
<!-- 비밀번호 입력 모달창 -->
<div class="modalPw" id="verifyPwModal" style="display:none;">
    <div class="modal-content-pw">
        <h2>회원 삭제</h2>
        <form id="verifyPwForm">
            <label for="adminPw">관리자 비밀번호 입력</label>
            <input type="password" id="adminPw" name="adminPw" required><br>
            <button type="button" id="deleteExecuteBtn">확인</button>
            <button type="button" id="deleteCancelBtn" class="close">취소</button>
        </form>
        <div id="checkPwError" style="color: red;"></div> <!-- 오류 메시지 표시 -->
    </div>
</div>
</body>
<!--<div th:replace="~{fragments/common/footer :: footerFragment}"></div>-->
</html>

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>오늘의 방문자 수</title>
    <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div th:replace="~{fragments/common/header :: headerFragment}"></div>
<!--좌측 메뉴-->
<div id="admin-body">
    <div class="admin-sidebar">
        <h3>관리자 메뉴</h3>
        <ul>
            <li><a th:href="@{/admin/markets}">시장 관리</a></li>
            <li><a th:href="@{/admin/shops}">상점 관리</a></li>
            <li><a th:href="@{/admin/items}">상품 관리</a></li>
            <li><a th:href="@{/admin/members}">회원목록 조회</a></li>
            <li><a th:href="@{/admin/inquiries}">문의사항 목록</a></li>
            <li><a th:href="@{/admin/notices}">공지사항 관리</a></li>
            <li><a th:href="@{/admin/visitor}">방문자 수</a></li>
        </ul>
    </div>
    <div class="admin-contents">
        <h2>방문자 수</h2>
        <p id="todayVisitorCount">오늘의 방문자 수를 로딩 중입니다...</p>
        <p id="totalVisitorCount">총 방문자 수를 로딩 중입니다...</p>
    </div>
</div>
<script>
    $(document).ready(function() {
        <!-- 오늘의 방문자 수 -->
        $.ajax({
            url: '/api/visitors/today',
            type: 'GET',
            contentType: 'application/json',
            success: function(data) {
                // 방문자 수를 페이지에 출력
                $('#todayVisitorCount').text('오늘의 방문자 수: ' + data);
            },
            error: function(xhr, status, error) {
                console.error("방문자 수 로딩 오류: " + error);
                $('#todayVisitorCount').text('방문자 수를 불러오는 데 실패했습니다.');
            }
        });

        <!-- 총 방문자 수 -->
        $.ajax({
            url: '/api/visitors/total',
            type: 'GET',
            contentType: 'application/json',
            success: function(data) {
                $('#totalVisitorCount').text('총 방문자 수: ' + data);
            },
            error: function(xhr, status, error) {
                console.error("방문자 수 로딩 오류: " + error);
                $('#totalVisitorCount').text('방문자 수를 불러오는 데 실패했습니다.');
            }
        });
    });
</script>
</body>
<!--<div th:replace="~{fragments/common/footer :: footerFragment}"></div>-->
</html>

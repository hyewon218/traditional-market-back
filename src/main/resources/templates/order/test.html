<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>결제</title>
    <link rel="stylesheet" href="styles.css">
    <script th:src="@{/js/delivery/deliveryList.js}" defer="defer"></script>
    <script th:src="@{/js/order/order.js}" defer="defer"></script>
    <script th:src="@{/js/order/deliveryMessage.js}" defer="defer"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            margin: auto;
        }

        h1, h2 {
            text-align: center;
        }

        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #007aff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #005bb5;
        }

        .hidden {
            display: none;
        }

        p {
            margin: 0; /* 기본 마진 제거 */
        }

        /* 모달 스타일 */
        .modal {
            display: none; /* 기본적으로 숨김 */
            position: fixed; /* 화면에 고정 */
            z-index: 1; /* 최상위 레이어 */
            left: 0;
            top: 0;
            width: 100%; /* 전체 화면 */
            height: 100%; /* 전체 화면 */
            overflow: auto; /* 필요 시 스크롤 */
            background-color: rgba(0, 0, 0, 0.5); /* 반투명 배경 */
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto; /* 화면 중앙에 위치 */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* 모달 너비 */
            max-width: 600px; /* 최대 너비 */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 그림자 효과 */
        }

        .manage-modal {
            display: none; /* 기본적으로 숨김 */
            position: fixed; /* 화면에 고정 */
            z-index: 2; /* 상위 레이어 */
            left: 0;
            top: 0;
            width: 100%; /* 전체 화면 */
            height: 100%; /* 전체 화면 */
            overflow: auto; /* 필요 시 스크롤 */
            background-color: rgba(0, 0, 0, 0.5); /* 반투명 배경 */
        }

        .manage-modal-content {
            background-color: #fff;
            margin: 15% auto; /* 화면 중앙에 위치 */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* 모달 너비 */
            max-width: 600px; /* 최대 너비 */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 그림자 효과 */
        }

        .message-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            width: 100%; /* 각 요소를 100% 너비로 설정 */
        }

        .message-item > span {
            flex: 7; /* 메시지 내용이 차지할 비율, 7:3 비율 */
            padding-right: 10px; /* 오른쪽 여백 추가 */
        }

        .message-item > button {
            flex: 3; /* 삭제 버튼이 차지할 비율 */
            padding: 8px 15px; /* 버튼 여백 설정 */
            background-color: #ff3b30; /* 배경색 추가 */
            color: white; /* 텍스트 색상 설정 */
            border: none; /* 테두리 없앰 */
            border-radius: 5px; /* 모서리 둥글게 */
            cursor: pointer; /* 커서 설정 */
        }

        .message-item > button:hover {
            background-color: #cc2c25; /* 호버 시 색상 변경 */
        }
    </style>
</head>
<body>
<div class="container">
    <h1>주문 페이지</h1>
    <hr/> <!-- 구분선 추가 -->

    <h2>배송지</h2>
    <button id="viewDeliveryListBtn">배송지 목록</button>
    <p id="selectedDeliveryTitle"></p><br>
    <p id="selectedDeliveryPhone"></p><br>
    <p id="selectedDeliveryAddr"></p> <!-- 선택된 배송지 표시할 영역 -->
    <button id="selectDeliveryBtn" onclick="openModal()">배송메시지를 선택해주세요</button>
    <textarea id="customMessageTextarea" style="width: 400px;" rows= "3" class="hidden"></textarea>
    <button id="saveCustomMessageBtn" style="display: none;">저장</button>
    <hr/>

    <h2>주문 정보</h2>
    <div id="orderDetails"></div>
    <hr/>

    <h2>결제수단 선택</h2>
    <label>
        <input type="radio" name="paymentMethod" value="카카오페이" checked> 카카오페이
    </label><br>
    <label>
        <input type="radio" name="paymentMethod" value="기타"> 기타 결제수단
    </label>
    <button id="payButton">결제</button>
</div>
<!-- 모달 -->
<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="manage-button" onclick="openManageModal()">관리</span>
        <span class="close" onclick="closeModal()">&times;</span>
        <button onclick="selectNone()">선택안함</button>
        <button onclick="enterDirectly()">직접 입력하기</button>
        <button onclick="selectCommon1()">문 앞에 놓아주세요</button>
        <button onclick="selectCommon2()">부재 시 연락 부탁드려요</button>
        <button onclick="selectCommon3()">배송 전 미리 연락해주세요</button>
        <!-- 저장된 배송 메시지 목록 버튼 출력 -->
        <div id="savedMessages"></div>
    </div>
</div>
<!-- 관리 버튼 누르면 나오는 모달 -->
<div id="manageModal" class="manage-modal">
    <div class="manage-modal-content">
        <span class="close" onclick="closeManageModal()">&times;</span>
        <h2>배송 메시지 관리</h2>
        <div class="message-container" id="manageModalContent"></div> <!-- 메시지를 담을 컨테이너 추가 -->
    </div>
</div>
</body>
</html>
